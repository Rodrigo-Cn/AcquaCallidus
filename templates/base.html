{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>{% block title %}Dashboard{% endblock %}</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;600;700;900&display=swap"
      rel="stylesheet"
    />
    <link rel="icon" type="image/png" href="{% static 'img/logo.png' %}" />
    <link href="{% static 'css/style.css' %}" rel="stylesheet" />
    <link href="{% static 'css/base.css' %}" rel="stylesheet" />
    <script src="{% static 'js/toast.js' %}"></script>
    <script src="{% static 'js/base.js' %}"></script>
    <script src="{% static 'js/map.js' %}"></script>
    <script src="{% static 'js/loading.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/gh/alpine-collective/alpine-magic-helpers@0.5.x/dist/component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.7.3/dist/alpine.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.bundle.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Cinzel&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  </head>
  <body>
    <div id="page-loader" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[9999]">
      <svg class="animate-spin h-16 w-16 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
      </svg>
    </div>
    {% if messages %}
      <div id="toast" class="fixed top-4 right-4 z-50 space-y-4 w-[300px]">
        {% for message in messages %}
          <div class="relative p-4 rounded-lg shadow-lg text-sm flex gap-3 items-start animate-fade-in-up transition-opacity duration-500 ease-in-out
            {% if 'success' in message.tags %}
              bg-green-50 border-l-4 border-green-500 text-green-800
            {% elif 'error' in message.tags %}
              bg-red-50 border-l-4 border-red-500 text-red-800
            {% elif 'warning' in message.tags %}
              bg-yellow-50 border-l-4 border-yellow-500 text-yellow-800
            {% elif 'info' in message.tags %}
              bg-blue-50 border-l-4 border-blue-500 text-blue-800
            {% else %}
              bg-gray-50 border-l-4 border-gray-500 text-gray-800
            {% endif %}
          ">
            <button onclick="this.parentElement.remove()" class="absolute top-1 right-2 text-lg text-black/50 hover:text-black">
              &times;
            </button>

            <div class="pt-0.5">
              {% if 'success' in message.tags %}
                <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
              {% elif 'error' in message.tags %}
                <svg class="w-5 h-5 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
              {% elif 'warning' in message.tags %}
                <svg class="w-5 h-5 text-yellow-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 9v2m0 4h.01M10.29 3.86L1.82 18a1 1 0 0 0 .86 1.5h18.64a1 1 0 0 0 .86-1.5L13.71 3.86a1 1 0 0 0-1.72 0z" />
                </svg>
              {% elif 'info' in message.tags %}
                <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M12 2a10 10 0 100 20 10 10 0 000-20z" />
                </svg>
              {% else %}
                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <circle cx="12" cy="12" r="10" stroke-width="2" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01" />
                </svg>
              {% endif %}
            </div>

            <div class="flex-1 font-medium pr-6">
              {{ message }}
            </div>
          </div>
        {% endfor %}
      </div>
    {% endif %}
    <div x-data="setup()" x-init="$refs.loading.classList.add('hidden'); setColors(color);" :class="{ 'dark': isDark}">
      <div class="flex h-screen antialiased text-gray-900 bg-gray-100 dark:bg-dark dark:text-light">
        <div
          x-ref="loading"
          class="fixed inset-0 z-50 flex items-center justify-center text-2xl font-semibold text-white bg-primary-darker"
        >
          Loading.....
        </div>

        <aside class="flex-shrink-0 hidden w-64 bg-white border-r dark:border-primary-darker dark:bg-darker md:block">
          <div class="flex flex-col h-full">
            <nav aria-label="Main" class="flex-1 px-2 py-4 space-y-2 overflow-y-hidden hover:overflow-y-auto">
              <div x-data="{ isActive: false, open: false}">
                <a
                  href="#"
                  @click="$event.preventDefault(); open = !open"
                  class="flex items-center p-2 text-gray-500 transition-colors rounded-md dark:text-light hover:bg-primary-100 dark:hover:bg-primary
                  {% if request.path == '/' %}
                    text-gray-700
                  {% else %}
                    text-gray-400 dark:text-gray-400
                  {% endif %}"
                  :class="{'bg-primary-100 dark:bg-primary': isActive || open}"
                  role="button"
                  aria-haspopup="true"
                  :aria-expanded="(open || isActive) ? 'true' : 'false'"
                >
                  <span aria-hidden="true">
                    <svg
                      class="w-5 h-5"
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
                      />
                    </svg>
                  </span>
                  <span class="ml-2 text-sm"> Dashboard </span>
                  <span class="ml-auto" aria-hidden="true">
                    <svg
                      class="w-4 h-4 transition-transform transform"
                      :class="{ 'rotate-180': open }"
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                    </svg>
                  </span>
                </a>
                <div role="menu" x-show="open" class="mt-2 space-y-2 px-7" aria-label="Dashboards">
                  <a
                    href="/"
                    role="menuitem"
                    class="block p-2 text-sm text-gray-700 transition-colors duration-200 rounded-md dark:text-light dark:hover:text-light hover:text-gray-700
                        {% if request.path == '/' %}
                          text-gray-700
                        {% else %}
                          text-gray-400 dark:text-gray-400
                        {% endif %}"
                  >
                    Home
                  </a>
                  <button
                    role="menuitem"
                    class="block p-2 text-sm text-gray-400 transition-colors duration-200 rounded-md dark:hover:text-light hover:text-gray-700"
                    onclick="document.getElementById('profileModal').classList.remove('hidden')"
                  >
                    Meu Perfil
                </button>
                </div>
              </div>

              <div x-data="{ isActive: false, open: false }">
                <a
                  href="#"
                  @click="$event.preventDefault(); open = !open"
                  class="flex items-center p-2 transition-colors rounded-md hover:bg-primary-100 dark:hover:bg-primary
                    {% if request.path == '/culturesvegetables/' %}
                      text-gray-700 dark:text-light
                    {% else %}
                      text-gray-400 dark:text-gray-400
                    {% endif %}"
                  role="button"
                  aria-haspopup="true"
                  :aria-expanded="(open || isActive) ? 'true' : 'false'"
                >
                  <span aria-hidden="true">
                    <svg
                    class="w-5 h-5"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 3v1m0 8v13m0-13a5 5 0 00-5-5H5.5a4.5 4.5 0 00-4.5 4.5V12a9 9 0 009 9h1a9 9 0 009-9V7.5A4.5 4.5 0 0018.5 3H17a5 5 0 00-5 5z"
                    />
                  </svg>
                  </span>
                  <span class="ml-2 text-sm"> Painel de Culturas </span>
                  <span aria-hidden="true" class="ml-auto">
                    <svg
                      class="w-4 h-4 transition-transform transform"
                      :class="{ 'rotate-180': open }"
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                    </svg>
                  </span>
                </a>
                <div x-show="open" class="mt-2 space-y-2 px-7" role="menu" arial-label="Components">
                  <a
                    href="/culturesvegetables/"
                    role="menuitem"
                    class="block p-2 text-sm transition-colors duration-200 rounded-md
                      {% if request.path == '/culturesvegetables/' %}
                        text-gray-700 dark:text-light
                      {% else %}
                        text-gray-400 dark:text-gray-400
                      {% endif %}"
                  >
                    Culturas Vegetais
                  </a>
                  <button
                    href="#"
                    role="menuitem"
                    class="block p-2 text-sm text-gray-400 transition-colors duration-200 rounded-md dark:text-gray-400 dark:hover:text-light hover:text-gray-700"
                    data-modal-target="authentication-modal" 
                    data-modal-toggle="authentication-modal"
                  >
                    Cadastrar Cultura
                </button>
                </div>
              </div>

              <div x-data="{ isActive: false, open: false }">
                <a
                  href="#"
                  @click="$event.preventDefault(); open = !open"
                  class="flex items-center p-2 transition-colors rounded-md hover:bg-primary-100 dark:hover:bg-primary
                  {% if request.path == '/geolocations/' %}
                    text-gray-700 dark:text-light
                  {% else %}
                    text-gray-400 dark:text-gray-400
                  {% endif %}"
                  role="button"
                  aria-haspopup="true"
                  :aria-expanded="(open || isActive) ? 'true' : 'false'"
                >
                  <span aria-hidden="true">
                    <svg
                    class="w-5 h-5"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zM12 11.5a2.5 2.5 0 110-5 2.5 2.5 0 010 5z"
                    />
                  </svg>
                  </span>
                  <span class="ml-2 text-sm"> Painel de Geolocalização </span>
                  <span aria-hidden="true" class="ml-auto">
                    <svg
                      class="w-4 h-4 transition-transform transform"
                      :class="{ 'rotate-180': open }"
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                    </svg>
                  </span>
                </a>
                <div x-show="open" class="mt-2 space-y-2 px-7" role="menu" arial-label="Pages">
                  <a
                    href="{% url 'geolocation_list' %}"
                    role="menuitem"
                    class="block p-2 text-sm transition-colors duration-200 rounded-md
                      {% if request.path == '/geolocations/' %}
                        text-gray-700 dark:text-light
                      {% else %}
                        text-gray-400 dark:text-gray-400
                      {% endif %}"
                  >
                    Geolocalizações
                  </a>
                  <button
                    href="pages/404.html"
                    role="menuitem"
                    class="block p-2 text-sm text-gray-400 transition-colors duration-200 rounded-md dark:text-gray-400 dark:hover:text-light hover:text-gray-700"
                    onclick="openModal()"
                  >
                    Cadastrar Geolocalização
                </button>
                </div>
              </div>
              
              <div x-data="{ isActive: false, open: false }">
                <a
                  href="#"
                  @click="$event.preventDefault(); open = !open"
                  class="flex items-center p-2 transition-colors rounded-md hover:bg-primary-100 dark:hover:bg-primary
                  {% if request.path == '/meteorologicaldatas/dates/' or request.path == '/meteorologicaldatas/geolocations/' %}
                    text-gray-700 dark:text-light
                  {% else %}
                    text-gray-400 dark:text-gray-400
                  {% endif %}"
                  role="button"
                  aria-haspopup="true"
                  :aria-expanded="(open || isActive) ? 'true' : 'false'"
                >
                  <span aria-hidden="true">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="w-5 h-5 text-gray-500"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor">
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M12 3v1m0 16v1m8-9h1m-17 0H3m15.36-6.36l.707.707M4.934 19.066l.707.707M16 17a4 4 0 100-8 4 4 0 000 8zm-4-3a5 5 0 00-9.9 1.5 4 4 0 004 4h7"
                      />
                    </svg>
                  </span>
                  <span class="ml-2 text-sm"> Dados Meteorológicos </span>
                  <span aria-hidden="true" class="ml-auto">
                    <svg
                      class="w-4 h-4 transition-transform transform"
                      :class="{ 'rotate-180': open }"
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                    </svg>
                  </span>
                </a>
                <div x-show="open" class="mt-2 space-y-2 px-7" role="menu" arial-label="Components">
                  <a
                    href="{% url 'meteorologicaldata_list_date' %}"
                    role="menuitem"
                    class="block p-2 text-sm transition-colors duration-200 rounded-md
                    {% if request.path == '/meteorologicaldatas/dates/' %}
                      text-gray-700 dark:text-light
                    {% else %}
                      text-gray-400 dark:text-gray-400
                    {% endif %}"
                  >
                    Dados por Data
                  </a>
                  <a
                    href="{% url 'meteorologicaldata_list_geolocation' %}"
                    role="menuitem"
                    class="block p-2 text-sm transition-colors duration-200 rounded-md
                    {% if request.path == '/meteorologicaldatas/geolocations/' %}
                      text-gray-700 dark:text-light
                    {% else %}
                      text-gray-400 dark:text-gray-400
                    {% endif %}"
                  >
                    Dados por Geolocalização
                  </a>
                </div>
              </div>

              <div x-data="{ isActive: false, open: false }">
                <a
                  href="#"
                  @click="$event.preventDefault(); open = !open"
                  class="flex items-center p-2 transition-colors rounded-md hover:bg-primary-100 dark:hover:bg-primary
                    {% if request.path == '/irrigationvolumes/cultures/' or  request.path == '/irrigationvolumes/dates/' %}
                      text-gray-700 dark:text-light
                    {% else %}
                      text-gray-400 dark:text-gray-400
                    {% endif %}"
                  role="button"
                  aria-haspopup="true"
                  :aria-expanded="(open || isActive) ? 'true' : 'false'"
                >
                  <span aria-hidden="true">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="w-5 h-5"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M12 2C12 2 7 8 7 11.5a5 5 0 0010 0C17 8 12 2 12 2zM5 20h14M7 16h10"
                      />
                    </svg>
                  </span>
                  <span class="ml-2 text-sm">Volumes de Irrigações</span>
                  <span aria-hidden="true" class="ml-auto">
                    <svg
                      class="w-4 h-4 transition-transform transform"
                      :class="{ 'rotate-180': open }"
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                    </svg>
                  </span>
                </a>
                <div x-show="open" class="mt-2 space-y-2 px-7" role="menu" arial-label="Components">
                  <a
                    href="/irrigationvolumes/dates/"
                    role="menuitem"
                    class="block p-2 text-sm transition-colors duration-200 rounded-md
                    {% if request.path == '/irrigationvolumes/dates/' %}
                      text-gray-700 dark:text-light
                    {% else %}
                      text-gray-400 dark:text-gray-400
                    {% endif %}"
                  >
                    Volume por Data (Kc)
                  </a>
                  <a
                    href="/irrigationvolumes/cultures/"
                    role="menuitem"
                    class="block p-2 text-sm transition-colors duration-200 rounded-md
                    {% if request.path == '/irrigationvolumes/cultures/' %}
                      text-gray-700 dark:text-light
                    {% else %}
                      text-gray-400 dark:text-gray-400
                    {% endif %}"
                  >
                    Volume por Cultura (Kc)
                  </a>
                </div>
              </div>

              <div x-data="{ isActive: false, open: false }">
                <a
                  href="#"
                  @click="$event.preventDefault(); open = !open"
                  class="flex items-center p-2 text-gray-500 transition-colors rounded-md dark:text-light hover:bg-primary-100 dark:hover:bg-primary
                  {% if request.path == '/logs/' %}
                    text-gray-700
                  {% else %}
                    text-gray-400 dark:text-gray-400
                  {% endif %}"
                  role="button"
                  aria-haspopup="true"
                  :aria-expanded="(open || isActive) ? 'true' : 'false'"
                >
                  <span aria-hidden="true">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="w-5 h-5"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                      stroke-width="1.5"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M9.75 3v2.25M14.25 3v2.25M9.75 18.75V21M14.25 18.75V21M3 9.75h2.25M3 14.25h2.25M18.75 9.75H21M18.75 14.25H21M7.5 6h9a1.5 1.5 0 011.5 1.5v9a1.5 1.5 0 01-1.5 1.5h-9A1.5 1.5 0 016 16.5v-9A1.5 1.5 0 017.5 6z"
                      />
                    </svg>
                  </span>
                  <span class="ml-2 text-sm">Controladores</span>
                  <span aria-hidden="true" class="ml-auto">
                    <svg
                      class="w-4 h-4 transition-transform transform"
                      :class="{ 'rotate-180': open }"
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                    </svg>
                  </span>
                </a>
                <div x-show="open" class="mt-2 space-y-2 px-7" role="menu" arial-label="Components">
                  <a
                    href="#"
                    role="menuitem"
                    class="block p-2 text-sm text-gray-400 transition-colors duration-200 rounded-md dark:text-gray-400 dark:hover:text-light hover:text-gray-700"
                  >
                    Meus Controladores
                  </a>
                  <button
                    href="pages/404.html"
                    role="menuitem"
                    class="block p-2 text-sm text-gray-400 transition-colors duration-200 rounded-md dark:text-gray-400 dark:hover:text-light hover:text-gray-700"
                    onclick="openModal()"
                  >
                    Criar Controlador
                  </button>
                  <a
                    href="/logs/"
                    role="menuitem"
                    class="block p-2 text-sm transition-colors duration-200 rounded-md
                      {% if request.path == '/logs/' %}
                        text-gray-700 dark:text-light
                      {% else %}
                        text-gray-400 dark:text-gray-400
                      {% endif %}"
                  >
                    Ver Logs
                  </a>
                </div>
              </div>

            </nav>

            <div class="flex-shrink-0 px-2 py-4 space-y-2">
              <button
                @click="openSettingsPanel"
                type="button"
                class="flex items-center justify-center w-full px-4 py-2 text-sm text-white rounded-md bg-primary hover:bg-primary-dark focus:outline-none focus:ring focus:ring-primary-dark focus:ring-offset-1 focus:ring-offset-white dark:focus:ring-offset-dark"
              >
                <span aria-hidden="true">
                  <svg
                    class="w-4 h-4 mr-2"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"
                    />
                  </svg>
                </span>
                <span>Customize</span>
              </button>
            </div>
          </div>
        </aside>

        <div class="flex-1 h-full overflow-x-hidden overflow-y-auto">
          <header class="relative bg-white dark:bg-darker">
            <div class="flex items-center justify-between p-2 border-b dark:border-primary-darker">
              <!-- Mobile menu button -->
              <button
                @click="isMobileMainMenuOpen = !isMobileMainMenuOpen"
                class="p-1 transition-colors duration-200 rounded-md text-primary-lighter bg-primary-50 hover:text-primary hover:bg-primary-100 dark:hover:text-light dark:hover:bg-primary-dark dark:bg-dark md:hidden focus:outline-none focus:ring"
              >
                <span class="sr-only">Open main manu</span>
                <span aria-hidden="true">
                  <svg
                    class="w-8 h-8"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                  </svg>
                </span>
              </button>

              <!-- Brand -->
              <a href="/" class="flex items-center space-x-2 text-lg font-semibold tracking-wide uppercase text-primary-dark dark:text-light">
                <img
                  src="{% static 'img/logo.png' %}"
                  class="h-6" 
                  alt="AcquaCallidus Logo"
                />
                <span class="font-cinzel">AcquaCallidus</span>
              </a>              

              <!-- Mobile sub menu button -->
              <button
                @click="isMobileSubMenuOpen = !isMobileSubMenuOpen"
                class="p-1 transition-colors duration-200 rounded-md text-primary-lighter bg-primary-50 hover:text-primary hover:bg-primary-100 dark:hover:text-light dark:hover:bg-primary-dark dark:bg-dark md:hidden focus:outline-none focus:ring"
              >
                <span class="sr-only">Open sub manu</span>
                <span aria-hidden="true">
                  <svg
                    class="w-8 h-8"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"
                    />
                  </svg>
                </span>
              </button>

              <!-- Desktop Right buttons -->
              <nav aria-label="Secondary" class="hidden space-x-2 md:flex md:items-center">
                <!-- Notification button -->
                <button
                  @click="openNotificationsPanel"
                  class="p-2 transition-colors duration-200 rounded-full text-primary-lighter bg-primary-50 hover:text-primary hover:bg-primary-100 dark:hover:text-light dark:hover:bg-primary-dark dark:bg-dark focus:outline-none focus:bg-primary-100 dark:focus:bg-primary-dark focus:ring-primary-darker"
                >
                  <span class="sr-only">Open Notification panel</span>
                  <svg
                    class="w-7 h-7"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    aria-hidden="true"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"
                    />
                  </svg>
                </button>

                <!-- User avatar button -->
                <div class="relative" x-data="{ open: false }">
                  <button
                    @click="open = !open; $nextTick(() => { if(open){ $refs.userMenu.focus() } })"
                    type="button"
                    aria-haspopup="true"
                    :aria-expanded="open ? 'true' : 'false'"
                    class="transition-opacity duration-200 rounded-full dark:opacity-75 dark:hover:opacity-100 focus:outline-none focus:ring dark:focus:opacity-100"
                  >
                    <span class="sr-only">User menu</span>
                    <img class="w-10 h-10 rounded-full" src="{% static 'img/home/avatar.png' %}" alt="Ahmed Kamel" />
                  </button>

                  <!-- User dropdown menu -->
                  <div
                    x-show="open"
                    x-ref="userMenu"
                    x-transition:enter="transition-all transform ease-out"
                    x-transition:enter-start="translate-y-1/2 opacity-0"
                    x-transition:enter-end="translate-y-0 opacity-100"
                    x-transition:leave="transition-all transform ease-in"
                    x-transition:leave-start="translate-y-0 opacity-100"
                    x-transition:leave-end="translate-y-1/2 opacity-0"
                    @click.away="open = false"
                    @keydown.escape="open = false"
                    class="absolute right-0 w-48 py-1 bg-white rounded-md shadow-lg top-12 ring-1 ring-black ring-opacity-5 dark:bg-dark focus:outline-none"
                    tabindex="-1"
                    role="menu"
                    aria-orientation="vertical"
                    aria-label="User menu"
                  >
                    <a                      
                      role="menuitem"
                      class="block px-4 py-2 text-sm text-gray-700 transition-colors hover:bg-gray-100 dark:text-light dark:hover:bg-primary cursor-pointer"
                      onclick="document.getElementById('profileModal').classList.remove('hidden')"
                    >
                      Meu Perfil
                    </a>
                    <a
                      role="menuitem"
                      class="block px-4 py-2 text-sm text-gray-700 transition-colors hover:bg-gray-100 dark:text-light dark:hover:bg-primary"
                      data-modal-target="logout-modal" 
                      data-modal-toggle="logout-modal"
                    >
                      Sair
                    </a>
                  </div>
                </div>
              </nav>

              <!-- Mobile sub menu -->
              <nav
                x-transition:enter="transition duration-200 ease-in-out transform sm:duration-500"
                x-transition:enter-start="-translate-y-full opacity-0"
                x-transition:enter-end="translate-y-0 opacity-100"
                x-transition:leave="transition duration-300 ease-in-out transform sm:duration-500"
                x-transition:leave-start="translate-y-0 opacity-100"
                x-transition:leave-end="-translate-y-full opacity-0"
                x-show="isMobileSubMenuOpen"
                @click.away="isMobileSubMenuOpen = false"
                class="absolute flex items-center p-4 bg-white rounded-md shadow-lg dark:bg-darker top-16 inset-x-4 md:hidden"
                aria-label="Secondary"
              >
                <div class="flex items-center gap-4 w-full justify-between">
                  <!-- Botão de notificação -->
                  <button
                    @click="openNotificationsPanel(); $nextTick(() => { isMobileSubMenuOpen = false })"
                    class="p-2 transition-colors duration-200 rounded-full text-primary-lighter bg-primary-50 hover:text-primary hover:bg-primary-100 dark:hover:text-light dark:hover:bg-primary-dark dark:bg-dark focus:outline-none focus:bg-primary-100 dark:focus:bg-primary-dark focus:ring-primary-darker"
                  >
                    <span class="sr-only">Open notifications panel</span>
                    <svg
                      class="w-7 h-7"
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                      aria-hidden="true"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"
                      />
                    </svg>
                  </button>

                  <!-- Botão do usuário/avatar -->
                  <div class="relative" x-data="{ open: false }">
                    <button
                      @click="open = !open"
                      type="button"
                      aria-haspopup="true"
                      :aria-expanded="open ? 'true' : 'false'"
                      class="block transition-opacity duration-200 rounded-full dark:opacity-75 dark:hover:opacity-100 focus:outline-none focus:ring dark:focus:opacity-100"
                    >
                      <span class="sr-only">User menu</span>
                      <img class="w-10 h-10 rounded-full" src="/static/img/home/avatar.png" alt="Ahmed Kamel" />
                    </button>

                    <!-- Dropdown do usuário -->
                    <div
                      x-show="open"
                      x-transition:enter="transition-all transform ease-out"
                      x-transition:enter-start="translate-y-1/2 opacity-0"
                      x-transition:enter-end="translate-y-0 opacity-100"
                      x-transition:leave="transition-all transform ease-in"
                      x-transition:leave-start="translate-y-0 opacity-100"
                      x-transition:leave-end="translate-y-1/2 opacity-0"
                      @click.away="open = false"
                      class="absolute right-0 w-48 py-1 origin-top-right bg-white rounded-md shadow-lg top-12 ring-1 ring-black ring-opacity-5 dark:bg-dark"
                      role="menu"
                      aria-orientation="vertical"
                      aria-label="User menu"
                    >
                      <a href="#" role="menuitem"
                        class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-light dark:hover:bg-primary cursor-pointer"
                        onclick="document.getElementById('profileModal').classList.remove('hidden')">
                        Meu Perfil
                      </a>
                      <a 
                        href="#" role="menuitem" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-light dark:hover:bg-primary"
                        data-modal-target="logout-modal"
                        data-modal-toggle="logout-modal"
                      >
                        Sair
                      </a>
                    </div>
                  </div>
                </div>
              </nav>
            </div>

            <!-- Mobile main manu -->
            <div
              class="border-b md:hidden dark:border-primary-darker"
              x-show="isMobileMainMenuOpen"
              @click.away="isMobileMainMenuOpen = false"
            >
              <nav aria-label="Main" class="px-2 py-4 space-y-2">
                <!-- Dashboards links -->
                <div x-data="{ isActive: false, open: false}">
                  <!-- active & hover classes 'bg-primary-100 dark:bg-primary' -->
                  <a
                    href="#"
                    @click="$event.preventDefault(); open = !open"
                    class="flex items-center p-2 text-gray-500 transition-colors rounded-md dark:text-light hover:bg-primary-100 dark:hover:bg-primary"
                    :class="{'bg-primary-100 dark:bg-primary': isActive || open}"
                    role="button"
                    aria-haspopup="true"
                    :aria-expanded="(open || isActive) ? 'true' : 'false'"
                  >
                    <span aria-hidden="true">
                      <svg
                        class="w-5 h-5"
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
                        />
                      </svg>
                    </span>
                    <span class="ml-2 text-sm"> Dashboards </span>
                    <span class="ml-auto" aria-hidden="true">
                      <!-- active class 'rotate-180' -->
                      <svg
                        class="w-4 h-4 transition-transform transform"
                        :class="{ 'rotate-180': open }"
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                      </svg>
                    </span>
                  </a>
                  <div role="menu" x-show="open" class="mt-2 space-y-2 px-7" aria-label="Dashboards">
                    <!-- active & hover classes 'text-gray-700 dark:text-light' -->
                    <!-- inActive classes 'text-gray-400 dark:text-gray-400' -->
                    <a
                      href="index.html"
                      role="menuitem"
                      class="block p-2 text-sm text-gray-700 transition-colors duration-200 rounded-md dark:text-light dark:hover:text-light hover:text-gray-700"
                    >
                      Home
                    </a>
                    <button
                      href="#"
                      role="menuitem"
                      class="block p-2 text-sm text-gray-400 transition-colors duration-200 rounded-md dark:hover:text-light hover:text-gray-700"
                      onclick="document.getElementById('profileModal').classList.remove('hidden')"
                    >
                      Meu Perfil
                  </button>
                  </div>
                </div>

                <!-- Components links -->
                <div x-data="{ isActive: false, open: false }">
                  <!-- active classes 'bg-primary-100 dark:bg-primary' -->
                  <a
                    href="#"
                    @click="$event.preventDefault(); open = !open"
                    class="flex items-center p-2 text-gray-500 transition-colors rounded-md dark:text-light hover:bg-primary-100 dark:hover:bg-primary"
                    :class="{ 'bg-primary-100 dark:bg-primary': isActive || open }"
                    role="button"
                    aria-haspopup="true"
                    :aria-expanded="(open || isActive) ? 'true' : 'false'"
                  >
                    <span aria-hidden="true">
                      <svg
                        class="w-5 h-5"
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M12 3v1m0 8v13m0-13a5 5 0 00-5-5H5.5a4.5 4.5 0 00-4.5 4.5V12a9 9 0 009 9h1a9 9 0 009-9V7.5A4.5 4.5 0 0018.5 3H17a5 5 0 00-5 5z"
                        />
                      </svg>
                    </span>
                    <span class="ml-2 text-sm"> Painel de Culturas </span>
                    <span aria-hidden="true" class="ml-auto">
                      <!-- active class 'rotate-180' -->
                      <svg
                        class="w-4 h-4 transition-transform transform"
                        :class="{ 'rotate-180': open }"
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                      </svg>
                    </span>
                  </a>
                  <div x-show="open" class="mt-2 space-y-2 px-7" role="menu" arial-label="Components">
                    <!-- active & hover classes 'text-gray-700 dark:text-light' -->
                    <!-- inActive classes 'text-gray-400 dark:text-gray-400' -->
                    <a
                      href="{% url 'culturevegetable_list' %}"
                      role="menuitem"
                      class="block p-2 text-sm text-gray-400 transition-colors duration-200 rounded-md dark:text-gray-400 dark:hover:text-light hover:text-gray-700"
                    >
                      Culturas Vegetais
                    </a>
                    <button
                      href="#"
                      role="menuitem"
                      class="block p-2 text-sm text-gray-400 transition-colors duration-200 rounded-md dark:text-gray-400 dark:hover:text-light hover:text-gray-700"
                      data-modal-target="authentication-modal" 
                      data-modal-toggle="authentication-modal"
                    >
                      Cadastrar Cultura
                    </button>
                  </div>
                </div>

                <!-- Pages links -->
                <div x-data="{ isActive: false, open: false }">
                  <!-- active classes 'bg-primary-100 dark:bg-primary' -->
                  <a
                    href="#"
                    @click="$event.preventDefault(); open = !open"
                    class="flex items-center p-2 text-gray-500 transition-colors rounded-md dark:text-light hover:bg-primary-100 dark:hover:bg-primary"
                    :class="{ 'bg-primary-100 dark:bg-primary': isActive || open }"
                    role="button"
                    aria-haspopup="true"
                    :aria-expanded="(open || isActive) ? 'true' : 'false'"
                  >
                    <span aria-hidden="true">
                      <svg
                        class="w-5 h-5"
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zM12 11.5a2.5 2.5 0 110-5 2.5 2.5 0 010 5z"
                        />
                      </svg>
                    </span>
                    <span class="ml-2 text-sm"> Painel de Geolocalização </span>
                    <span aria-hidden="true" class="ml-auto">
                      <!-- active class 'rotate-180' -->
                      <svg
                        class="w-4 h-4 transition-transform transform"
                        :class="{ 'rotate-180': open }"
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                      </svg>
                    </span>
                  </a>
                  <div x-show="open" class="mt-2 space-y-2 px-7" role="menu" arial-label="Pages">
                    <!-- active & hover classes 'text-gray-700 dark:text-light' -->
                    <!-- inActive classes 'text-gray-400 dark:text-gray-400' -->
                    <a
                      href="{% url 'geolocation_list' %}"
                      role="menuitem"
                      class="block p-2 text-sm text-gray-400 transition-colors duration-200 rounded-md dark:text-gray-400 dark:hover:text-light hover:text-gray-700"
                    >
                      Geolocalizações
                    </a>
                    <button
                      href="pages/404.html"
                      role="menuitem"
                      class="block p-2 text-sm text-gray-400 transition-colors duration-200 rounded-md dark:text-gray-400 dark:hover:text-light hover:text-gray-700"
                      onclick="openModal()"
                    >
                      Cadastrar Geolocalização
                  </button>
                  </div>
                </div>

                <!-- Authentication links -->
                <div x-data="{ isActive: false, open: false}">
                  <!-- active & hover classes 'bg-primary-100 dark:bg-primary' -->
                  <a
                    href="#"
                    @click="$event.preventDefault(); open = !open"
                    class="flex items-center p-2 text-gray-500 transition-colors rounded-md dark:text-light hover:bg-primary-100 dark:hover:bg-primary"
                    :class="{'bg-primary-100 dark:bg-primary': isActive || open}"
                    role="button"
                    aria-haspopup="true"
                    :aria-expanded="(open || isActive) ? 'true' : 'false'"
                  >
                    <span aria-hidden="true">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="w-5 h-5 text-gray-500"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M12 3v1m0 16v1m8-9h1m-17 0H3m15.36-6.36l.707.707M4.934 19.066l.707.707M16 17a4 4 0 100-8 4 4 0 000 8zm-4-3a5 5 0 00-9.9 1.5 4 4 0 004 4h7"
                        />
                      </svg>
                    </span>
                    <span class="ml-2 text-sm"> Dados Meteorológicos </span>
                    <span aria-hidden="true" class="ml-auto">
                      <!-- active class 'rotate-180' -->
                      <svg
                        class="w-4 h-4 transition-transform transform"
                        :class="{ 'rotate-180': open }"
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                      </svg>
                    </span>
                  </a>
                  <div x-show="open" class="mt-2 space-y-2 px-7" role="menu" aria-label="Authentication">
                    <!-- active & hover classes 'text-gray-700 dark:text-light' -->
                    <!-- inActive classes 'text-gray-400 dark:text-gray-400' -->
                    <a
                      href="auth/register.html"
                      role="menuitem"
                      class="block p-2 text-sm text-gray-400 transition-colors duration-200 rounded-md dark:hover:text-light hover:text-gray-700"
                    >
                      Dados por Data
                    </a>
                    <a
                      href="auth/login.html"
                      role="menuitem"
                      class="block p-2 text-sm text-gray-400 transition-colors duration-200 rounded-md dark:hover:text-light hover:text-gray-700"
                    >
                      Dados por Geolocalização
                    </a>
                  </div>
                </div>

                <!-- Layouts links -->
                <div x-data="{ isActive: false, open: false}">
                  <!-- active & hover classes 'bg-primary-100 dark:bg-primary' -->
                  <a
                    href="#"
                    @click="$event.preventDefault(); open = !open"
                    class="flex items-center p-2 text-gray-500 transition-colors rounded-md dark:text-light hover:bg-primary-100 dark:hover:bg-primary"
                    :class="{'bg-primary-100 dark:bg-primary': isActive || open}"
                    role="button"
                    aria-haspopup="true"
                    :aria-expanded="(open || isActive) ? 'true' : 'false'"
                  >
                    <span aria-hidden="true">
                                          <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="w-5 h-5"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M12 2C12 2 7 8 7 11.5a5 5 0 0010 0C17 8 12 2 12 2zM5 20h14M7 16h10"
                      />
                    </svg>
                    </span>
                    <span class="ml-2 text-sm">Volumes de Irrigações</span>
                    <span aria-hidden="true" class="ml-auto">
                      <!-- active class 'rotate-180' -->
                      <svg
                        class="w-4 h-4 transition-transform transform"
                        :class="{ 'rotate-180': open }"
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                      </svg>
                    </span>
                  </a>
                  <div x-show="open" class="mt-2 space-y-2 px-7" role="menu" aria-label="Layouts">
                    <!-- active & hover classes 'text-gray-700 dark:text-light' -->
                    <!-- inActive classes 'text-gray-400 dark:text-gray-400' -->
                    <a
                      href="layouts/two-columns-sidebar.html"
                      role="menuitem"
                      class="block p-2 text-sm text-gray-400 transition-colors duration-200 rounded-md dark:text-gray-400 dark:hover:text-light hover:text-gray-700"
                    >
                      Volume por Data (Kc)
                    </a>
                    <a
                      href="layouts/two-columns-sidebar.html"
                      role="menuitem"
                      class="block p-2 text-sm text-gray-400 transition-colors duration-200 rounded-md dark:text-gray-400 dark:hover:text-light hover:text-gray-700"
                    >
                      Volume por Cultura (Kc)
                    </a>
                  </div>
                </div>

                <div x-data="{ isActive: false, open: false }">
                  <!-- active classes 'bg-primary-100 dark:bg-primary' -->
                  <a
                    href="#"
                    @click="$event.preventDefault(); open = !open"
                    class="flex items-center p-2 text-gray-500 transition-colors rounded-md dark:text-light hover:bg-primary-100 dark:hover:bg-primary"
                    :class="{ 'bg-primary-100 dark:bg-primary': isActive || open }"
                    role="button"
                    aria-haspopup="true"
                    :aria-expanded="(open || isActive) ? 'true' : 'false'"
                  >
                    <span aria-hidden="true">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="w-5 h-5"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                        stroke-width="1.5"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          d="M9.75 3v2.25M14.25 3v2.25M9.75 18.75V21M14.25 18.75V21M3 9.75h2.25M3 14.25h2.25M18.75 9.75H21M18.75 14.25H21M7.5 6h9a1.5 1.5 0 011.5 1.5v9a1.5 1.5 0 01-1.5 1.5h-9A1.5 1.5 0 016 16.5v-9A1.5 1.5 0 017.5 6z"
                        />
                      </svg>
                    </span>
                    <span class="ml-2 text-sm"> Controladores </span>
                    <span aria-hidden="true" class="ml-auto">
                      <!-- active class 'rotate-180' -->
                      <svg
                        class="w-4 h-4 transition-transform transform"
                        :class="{ 'rotate-180': open }"
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                      </svg>
                    </span>
                  </a>
                  <div x-show="open" class="mt-2 space-y-2 px-7" role="menu" arial-label="Components">
                    <!-- active & hover classes 'text-gray-700 dark:text-light' -->
                    <!-- inActive classes 'text-gray-400 dark:text-gray-400' -->
                    <a
                      href="{% url 'culturevegetable_list' %}"
                      role="menuitem"
                      class="block p-2 text-sm text-gray-400 transition-colors duration-200 rounded-md dark:text-gray-400 dark:hover:text-light hover:text-gray-700"
                    >
                      Meus Controladores
                    </a>
                    <button
                      href="#"
                      role="menuitem"
                      class="block p-2 text-sm text-gray-400 transition-colors duration-200 rounded-md dark:text-gray-400 dark:hover:text-light hover:text-gray-700"
                      data-modal-target="authentication-modal" 
                      data-modal-toggle="authentication-modal"
                    >
                      Criar Controlador
                    </button>
                    <a
                      href="/logs/"
                      role="menuitem"
                      class="block p-2 text-sm text-gray-400 transition-colors duration-200 rounded-md dark:text-gray-400 dark:hover:text-light hover:text-gray-700"
                    >
                      Ver Logs
                    </a>
                  </div>
                </div>
              </nav>
            </div>
          </header>

          <!-- Modal Cultura Vegetal -->
          <div id="authentication-modal" tabindex="-1" aria-hidden="true"
            class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full h-screen bg-gray-900 bg-opacity-50">
            <div class="relative p-4 w-full max-w-md max-h-full">
              <div class="relative bg-white rounded-lg shadow-md border border-blue-200">
                <div class="flex items-center justify-between p-4 md:p-5 border-b border-gray-200 rounded-t">
                  <h3 class="text-xl font-semibold text-gray-900">
                    Cadastrar Cultura Vegetal
                  </h3>
                  <button type="button"
                    class="text-2xl font-bold text-gray-500 hover:text-red-500 ms-auto"
                    data-modal-hide="authentication-modal">
                    &times;
                  </button>
                </div>
                <div class="p-4 md:p-5 bg-white">
                  <form method="POST" class="space-y-4" action="{% url 'culturevegetable_create' %}">
                    {% csrf_token %}
                    {{ form_culture_vegetable.as_p }}
                    <button type="submit"
                      class="w-full text-white bg-sky-500 hover:bg-sky-600 focus:ring-4 focus:outline-none focus:ring-sky-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">
                      Salvar
                    </button>
                  </form>
                </div>
              </div>
            </div>
          </div>

          <!-- Modal Geolocation -->
          <div id="modal" class="hidden fixed inset-0 bg-black bg-opacity-50 items-center justify-center z-50">
            <div class="bg-white rounded-lg shadow-lg w-full max-w-xl">
              <div class="flex justify-between items-center p-4 border-b">
                <h2 class="text-lg font-semibold">Cadastrar Geolocalização</h2>
                <button onclick="closeModal()" class="text-2xl font-bold text-gray-500 hover:text-red-500">&times;</button>
              </div>

              <form id="locationForm" class="p-4 space-y-4" method="POST" action="{% url 'create_geolocation' %}" onsubmit="handleSubmit(event)">
                {% csrf_token %}
                <div>
                  <label for="city" class="block font-medium">Cidade</label>
                  <div class="relative">
                    <input placeholder="Guanambi..." type="text" id="city" name="city" class="w-full border rounded p-2 pr-10" required autocomplete="off" />
                    <svg id="cityLoadingSpinner" class="hidden animate-spin h-5 w-5 text-gray-500 absolute right-3 top-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
                    </svg>
                  </div>
                </div>

                <div>
                  <label for="state" class="block font-medium">Estado</label>
                  <div class="relative">
                    <input placeholder="Bahia..." type="text" id="state" name="state" class="w-full border rounded p-2 pr-10" required autocomplete="off" />
                    <svg id="stateLoadingSpinner" class="hidden animate-spin h-5 w-5 text-gray-500 absolute right-3 top-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
                    </svg>
                  </div>
                </div>

                <div>
                  <label class="block font-medium mb-1">Selecione no Mapa</label>
                  <div id="map" class="w-full border rounded" style="height: 250px;"></div>
                </div>

                <div class="grid grid-cols-2 gap-4">
                  <div>
                    <label for="latitude" class="block font-medium">Latitude</label>
                    <input type="text" id="latitude" name="latitude" class="w-full border rounded p-2 bg-gray-100" readonly />
                  </div>
                  <div>
                    <label for="longitude" class="block font-medium">Longitude</label>
                    <input type="text" id="longitude" name="longitude" class="w-full border rounded p-2 bg-gray-100" readonly />
                  </div>
                </div>

                <button id="submitBtn" type="submit"
                  class="w-full bg-sky-500 text-white rounded-lg py-2 hover:bg-sky-600 transition flex justify-center items-center gap-2">
                  <svg id="submitLoadingSpinner" class="hidden animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
                  </svg>
                  <span id="btnText">Salvar Geolocalização</span>
                </button>
              </form>
            </div>
          </div>

          <!-- Modal Profile -->
          <div
            id="profileModal"
            class="fixed inset-0 z-50 bg-black bg-opacity-50 hidden"
          >
            <div class="flex items-center justify-center min-h-screen px-4">
              <div class="bg-white w-full max-w-md p-8 rounded-3xl shadow-2xl relative transition-all duration-300 transform scale-100">
                <div class="flex justify-center mb-6">
                  <div class="bg-gray-700 rounded-full p-4 shadow-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 12a5 5 0 100-10 5 5 0 000 10zm0 2c-4.418 0-8 2.015-8 4.5V20h16v-1.5c0-2.485-3.582-4.5-8-4.5z" />
                    </svg>
                  </div>
                </div>
                <h2 class="text-2xl font-bold text-center text-gray-700 mb-6">
                  Meu Perfil
                </h2>
                <div class="space-y-5 text-left">
                  <div>
                    <label class="block text-sm font-semibold text-gray-500">Nome</label>
                    <p class="text-gray-800">{{ user.username }}</p>
                  </div>
                  <div>
                    <label class="block text-sm font-semibold text-gray-500">Email</label>
                    <p class="text-gray-800">{{ user.email }}</p>
                  </div>
                  <div>
                    <label class="block text-sm font-semibold text-gray-500">Função</label>
                    <p class="text-gray-800">Administrador</p>
                  </div>
                </div>
                <div class="mt-10 flex justify-center">
                  <button
                    onclick="document.getElementById('profileModal').classList.add('hidden')"
                    class="inline-flex items-center gap-2 bg-red-600 text-white font-medium rounded-lg px-6 py-2 hover:bg-red-500 transition"
                  >
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                    Fechar
                  </button>
                </div>
              </div>
            </div>
          </div>

        <!-- Modal Logout -->
        <div id="logout-modal" tabindex="-1"
          class="hidden fixed inset-0 z-[9999] bg-black bg-opacity-50 flex items-center justify-center px-4">
          
          <div class="bg-white rounded-lg shadow-lg w-full max-w-sm p-6 relative z-[10000]">
            <button type="button"
              class="absolute top-3 right-3 text-gray-400 hover:text-gray-900"
              data-modal-hide="logout-modal">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M6 18L18 6M6 6l12 12"/>
              </svg>
            </button>

            <div class="flex justify-center mb-4">
              <div class="w-28 h-28 rounded-full bg-red-100 flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg"
                    fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor" class="w-14 h-14 text-red-600">
                  <path stroke-linecap="round" stroke-linejoin="round"
                        d="M15.75 9V5.25A2.25 2.25 0 0013.5 3H6.75A2.25 
                        2.25 0 004.5 5.25v13.5A2.25 2.25 0 006.75 21h6.75a2.25 
                        2.25 0 002.25-2.25V15M18 12H9m9 0l-3-3m3 3l-3 3" />
                </svg>
              </div>
            </div>

            <h3 class="text-lg font-semibold text-center text-gray-800 mb-4">
              Deseja realmente sair?
            </h3>

            <form method="POST" action="{% url 'logout' %}" class="flex justify-center gap-4 mt-4">
              {% csrf_token %}
              <button type="submit"
                class="text-white bg-red-600 hover:bg-red-700 focus:ring-4 focus:outline-none 
                      focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5">
                Sair
              </button>
              <button type="button"
                class="px-5 py-2.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 
                      rounded-lg hover:bg-gray-100 hover:text-blue-600 focus:outline-none 
                      focus:ring-2 focus:ring-gray-200"
                data-modal-hide="logout-modal">
                Cancelar
              </button>
            </form>
          </div>
        </div>

        <div id="notification" class="fixed top-5 right-5 hidden p-4 rounded shadow-lg text-white z-[99999] pointer-events-none">
        </div>

        {% block content %}
        {% endblock %}

          <!-- footer -->
          <footer class="bg-white pt-4">
            <div class="mx-auto w-full max-w-screen-xl p-4 py-6 lg:py-8">
              <div class="md:flex md:justify-between">
                <div class="mb-6 md:mb-0"></div>
                <div class="grid grid-cols-2 gap-8 sm:gap-6 sm:grid-cols-3">
                  <div>
                    <ul class="text-gray-700 font-medium">
                      <li class="flex items-center space-x-2">
                        <svg class="w-5 h-5 text-blue-600" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                          <path d="M4.98 3.5C4.98 4.88 3.86 6 2.5 6S0 4.88 0 3.5 1.12 1 2.5 1 4.98 2.12 4.98 3.5zM0 8h5v16H0V8zm7.5 0h4.7v2.3h.1c.7-1.3 2.4-2.6 5-2.6 5.3 0 6.3 3.5 6.3 8V24h-5v-7.4c0-1.8 0-4.1-2.5-4.1-2.5 0-2.9 2-2.9 4v7.5h-5V8z"/>
                        </svg>
                        <a href="https://www.linkedin.com/in/rodrigo-costa-411038255/" target="_blank" class="hover:underline hover:text-primary-dark">LinkedIn</a>
                      </li>
                    </ul>
                  </div>
                  <div>
                    <ul class="text-gray-700 font-medium">
                      <li class="flex items-center space-x-2 mb-4">
                        <svg class="w-5 h-5 text-gray-800" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                          <path d="M12 0C5.372 0 0 5.373 0 12c0 5.302 3.438 9.8 8.205 11.387.6.11.82-.26.82-.577v-2.165c-3.338.725-4.033-1.415-4.033-1.415-.546-1.385-1.333-1.754-1.333-1.754-1.09-.745.083-.729.083-.729 1.205.084 1.84 1.237 1.84 1.237 1.07 1.835 2.807 1.305 3.492.997.108-.775.418-1.305.76-1.605-2.665-.305-5.466-1.334-5.466-5.933 0-1.31.467-2.38 1.235-3.22-.123-.303-.536-1.527.117-3.176 0 0 1.008-.322 3.3 1.23a11.495 11.495 0 013.003-.404c1.02.005 2.045.138 3.003.404 2.29-1.552 3.296-1.23 3.296-1.23.656 1.649.243 2.873.12 3.176.77.84 1.232 1.91 1.232 3.22 0 4.61-2.804 5.625-5.475 5.922.429.37.813 1.096.813 2.21v3.285c0 .32.216.694.825.576C20.565 21.796 24 17.298 24 12c0-6.627-5.373-12-12-12z"/>
                        </svg>
                        <a href="https://github.com/Rodrigo-Cn" target="_blank" class="hover:underline hover:text-primary-dark">Github</a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
          
              <hr class="my-6 border-gray-200 sm:mx-auto lg:my-8" />
              <div class="sm:flex sm:items-center sm:justify-between">
                <span class="text-sm text-gray-700 sm:text-center">
                  © 2025 <a href="#" class="hover:underline hover:text-primary-dark">Rodrigo Costa™</a>. Todos os Direitos Reservados.
                </span>
                <div class="flex mt-4 sm:justify-center sm:mt-0">
                  <a href="#" class="text-gray-700 hover:text-primary-dark ms-5"></a>
                </div>
              </div>
            </div>
          </footer>          
        </div>

        <!-- Notification panel -->
        <div
          x-transition:enter="transition duration-300 ease-in-out"
          x-transition:enter-start="opacity-0"
          x-transition:enter-end="opacity-100"
          x-transition:leave="transition duration-300 ease-in-out"
          x-transition:leave-start="opacity-100"
          x-transition:leave-end="opacity-0"
          x-show="isNotificationsPanelOpen"
          @click="isNotificationsPanelOpen = false"
          class="fixed inset-0 z-10 bg-primary-darker"
          style="opacity: 0.5"
          aria-hidden="true"
        ></div>
        <section
          x-transition:enter="transition duration-300 ease-in-out transform sm:duration-500"
          x-transition:enter-start="-translate-x-full"
          x-transition:enter-end="translate-x-0"
          x-transition:leave="transition duration-300 ease-in-out transform sm:duration-500"
          x-transition:leave-start="translate-x-0"
          x-transition:leave-end="-translate-x-full"
          x-ref="notificationsPanel"
          x-show="isNotificationsPanelOpen"
          @keydown.escape="isNotificationsPanelOpen = false"
          tabindex="-1"
          aria-labelledby="notificationPanelLabel"
          class="fixed inset-y-0 z-20 w-full max-w-xs bg-white dark:bg-darker dark:text-light sm:max-w-md focus:outline-none"
        >
          <div class="absolute right-0 p-2 transform translate-x-full">
            <button
              @click="isNotificationsPanelOpen = false"
              class="p-2 text-white rounded-md focus:outline-none focus:ring"
            >
              <svg
                class="w-5 h-5"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>
          <div class="flex flex-col h-screen" x-data="{ activeTabe: 'action' }">
            <div class="flex-shrink-0">
              <div class="flex items-center justify-between px-4 pt-4 border-b dark:border-primary-darker">
                <h2 id="notificationPanelLabel" class="pb-4 font-semibold">Logs de Erro</h2>
                <div class="space-x-2">
                  <a href=""
                    class="px-px pb-4 transition-all duration-200 transform translate-y-px border-b focus:outline-none"
                  >
                    Ver Logs
                </a>
                </div>
              </div>
            </div>

            <div class="flex-1 pt-4 overflow-y-hidden hover:overflow-y-auto">
              <!-- Logs -->
              {% if logs %}
                <div class="space-y-4" x-show.transition.in="activeTabe == 'action'">
                  {% for log in logs %}
                    <a class="block">
                      <div class="flex px-4 space-x-4">
                        <div class="relative flex-shrink-0">
                          <span class="inline-block p-2 overflow-visible rounded-full
                          {% if log.viewed %}
                            bg-green-100 text-green-700
                          {% else %}
                            bg-yellow-100 text-yellow-700
                          {% endif %}">
                            <svg class="w-7 h-7" xmlns="http://www.w3.org/2000/svg" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
                            </svg>
                          </span>
                          <div class="absolute h-24 p-px -mt-3 -ml-px bg-primary-50 left-1/2 dark:bg-primary-darker"></div>
                        </div>

                        <div class="flex-1 overflow-hidden">
                          <h5 class="text-sm font-semibold text-gray-600 dark:text-light">
                            {{ log.reference }}
                          </h5>
                          <span class="text-sm font-normal text-gray-400 dark:text-primary-light">
                            {{ log.created_at|timesince }} atrás
                          </span>
                        </div>
                      </div>
                    </a>
                  {% endfor %}
                </div>
              {% else %}
                <p class="text-gray-400 text-sm">Nenhum log encontrado.</p>
              {% endif %}
            </div>
          </div>
      </div>
    </div>
  </body>
</html>
